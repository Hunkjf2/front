<div class="flex flex-col flex-auto w-full">
    <app-cabecalho [titulo]="titulo"></app-cabecalho>
    <div class="flex flex-col flex-auto">
        <div class="w-full">
            <div class="flex justify-center items-start p-4">
                <mat-card-content class="w-full p-10">
                    <div class="space-y-6">
                        <form [formGroup]="formulario" (ngSubmit)="this.enviar.emit()"
                            class="flex flex-col mt-8 p-8 pb-4 bg-card rounded-2xl shadow overflow-hidden">
                            <div class="flex flex-col w-full mb-4">
                                <div class="flex flex-row gap-4">
                                    <div class="w-full">
                                        <span class="mb-2">Login*:</span>
                                        <mat-form-field appearance="outline" class="w-full">
                                            <input matInput formControlName="username" autocomplete="off">
                                            <mat-error
                                                *ngIf="formulario.get('username')?.hasError('required') && formulario.get('username')?.touched">
                                                Login é obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                    </div> 
                                    <div class="w-full">
                                        <span class="mb-2">E-mail*:</span>
                                        <mat-form-field appearance="outline" class="w-full">
                                            <input matInput type="email" formControlName="email" autocomplete="off">
                                            <mat-error
                                                *ngIf="formulario.get('email')?.hasError('required') && formulario.get('email')?.touched">
                                                E-mail é obrigatório
                                            </mat-error>
                                            <mat-error
                                                *ngIf="formulario.get('email')?.hasError('email') && formulario.get('email')?.touched">
                                                E-mail deve ter um formato válido
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                            <div class="flex flex-col w-full mb-4 mt-2">
                                <div class="flex flex-row gap-4">
                                    <div class="w-full">
                                        <span class="mb-2">Nome*:</span>
                                        <mat-form-field appearance="outline" class="w-full">
                                            <input matInput formControlName="firstName" autocomplete="off">
                                            <mat-error
                                                *ngIf="formulario.get('firstName')?.hasError('required') && formulario.get('firstName')?.touched">
                                                Nome é obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="w-full">
                                        <span class="mb-2">Sobrenome*:</span>
                                        <mat-form-field appearance="outline" class="w-full">
                                            <input matInput formControlName="lastName" autocomplete="off">
                                            <mat-error
                                                *ngIf="formulario.get('lastName')?.hasError('required') && formulario.get('lastName')?.touched">
                                                Sobrenome é obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                            <div formGroupName="attributes" class="flex flex-col w-full mb-4 mt-2">
                                <div class="flex flex-row gap-4">
                                    <div class="w-full">
                                        <span class="mb-2">CPF*:</span>
                                        <mat-form-field appearance="outline" class="w-full">
                                            <input matInput formControlName="cpf" mask="000.000.000-00"
                                                autocomplete="off">
                                            <mat-error
                                                *ngIf="formulario.get('attributes.cpf')?.hasError('required') && formulario.get('attributes.cpf')?.touched">
                                                CPF é obrigatório
                                            </mat-error>
                                            <mat-error *ngIf="formulario.get('attributes.cpf')?.hasError('invalidCpf')">
                                                CPF inválido
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="w-full">
                                        <span class="mb-2">Celular:</span>
                                        <mat-form-field appearance="outline" class="w-full">
                                            <input matInput formControlName="phone" mask="(00) 00000-0000"
                                                autocomplete="off">
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                            <div class="flex flex-row w-full mt-6">
                                <div class="flex items-center justify-start w-full">
                                    <button mat-raised-button type="button" class="flex items-center gap-2"
                                        [routerLink]="['/usuario/listar']">
                                        <span>Voltar</span>
                                    </button>
                                </div>
                                <div class="flex items-center justify-end w-full">
                                    <button mat-raised-button color="primary" type="submit"
                                        [disabled]="titulo == 'Detalhar Usuário'" class="flex items-center gap-2">
                                        <span>Salvar</span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </mat-card-content>
            </div>
        </div>
    </div>
</div>